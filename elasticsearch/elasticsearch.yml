cluster:
  name: "elk-cluster"
  routing.allocation.awareness.attributes: aws_availability_zone

cloud.node.auto_attributes: true

discovery.zen.minimum_master_nodes: 2

node:
  name: ${HOSTNAME}
  master: true
  data: true

discovery:
  ec2:
    availability_zones: eu-west-2a,eu-west-2b,eu-west-2c
    node_cache_time: 120s
    groups: ${CLUSTER_SECURITY_GROUP}
    endpoint: ec2.eu-west-2.amazonaws.com
    host_type: private_ip
  zen:
    hosts_provider: ec2
    join_timeout: 90s
    ping_timeout: 30s

http.port: 9200
transport.tcp.port: 9300
network.host:
- eth0:ipv4
- _local_
network.bind_host: 0
network.publish_host: _ec2:privateIp_

plugin.mandatory:
- discovery-ec2
- repository-s3

xpack.security.audit.enabled: true
xpack.security.audit.outputs: [ logfile ]

xpack.ssl.key:                     /usr/share/elasticsearch/config/node.key
xpack.ssl.certificate:             /usr/share/elasticsearch/config/node.crt
xpack.ssl.certificate_authorities: [ "/usr/share/elasticsearch/config/ca.crt" ]

xpack.security.http.ssl.enabled: true 
xpack.security.transport.ssl.enabled: true 

xpack.security.transport.ssl.verification_mode: none
xpack.ssl.verification_mode: none

xpack.monitoring.enabled: true
xpack.monitoring.elasticsearch.collection.enabled: true

logger.discovery: "DEBUG"
